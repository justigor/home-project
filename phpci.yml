build_settings:
    verbose: true
    clone_depth: 1 # depth of 1 is a shallow clone, remove this line to clone entire repo
    ignore:
        - "vendor"
        - "tests"
    pgsql:
        host: 'localhost;dbname=test'
        user: 'pguser'
        pass: 'pguser'

setup:
    pgsql:
    composer:
        action: "update"
    shell:
        - "codecept build --config=tests"

test:
#    ./yii migrate/up --migrationPath=@yii2mod/rbac/migrations
#    ./yii rbac/sync-deploy
    codeception:
        log_path: "tests/codeception/_output"
        path: "tests/codeception/_output/"
        config: "tests/codeception.yml"
#    php_unit:
#        config:
#            - "PHPUnit-all.xml"
#            - "PHPUnit-ubuntu-fix.xml"
#        directory:
#            - "tests/"
#        run_from: "tests/"
#        coverage: "tests/logs/coverage"
#    php_mess_detector:
#        allow_failures: true
#    php_code_sniffer:
#        standard: "PSR2"
#    php_cpd:
#        allow_failures: true
#    grunt:
#        task: "build"

complete:
    pgsql:
        #- "DROP DATABASE test;"

